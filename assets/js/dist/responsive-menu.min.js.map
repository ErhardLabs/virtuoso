{"version":3,"sources":["responsive-menu.min.js"],"names":["document","$","undefined","addClass","virtuoso","mainMenuButtonClass","subMenuButtonClass","_combineMenus","console","log","window","innerWidth","appendTo","hide","removeAttr","show","_addClassID","$this","this","nav","next","id","attr","_doResize","buttons","superfish","_getDisplayValue","delay","animation","opacity","height","dropShadows","_superfishToggle","startLink","endLink","each","link","replace","_changeSkipLink","removeClass","_maybeClose","_mainmenuToggle","_toggleAria","toggleClass","slideToggle","_submenuToggle","others","closest","siblings","find","slideUp","$id","element","getElementById","getComputedStyle","getPropertyValue","attribute","index","value","init","toggleButtons","menu","class","aria-expanded","aria-pressed","role","append","params","mainMenu","submenu","text","subMenu","length","before","on","triggerHandler","ready","resize","virtuosoLocalizedArgs","click","e","hasClass","css","margin","overflow","jQuery"],"mappings":"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","file":"responsive-menu.min.js","sourcesContent":["'use strict';\n\n(function (document, $, undefined) {\n\n  $('body').addClass('js');\n\n  'use strict';\n\n  var virtuoso = {},\n      mainMenuButtonClass = 'menu-toggle',\n      subMenuButtonClass = 'sub-menu-toggle';\n\n  virtuoso.init = function () {\n    var toggleButtons = {\n      menu: $('<button />', {\n        'class': mainMenuButtonClass,\n        'aria-expanded': false,\n        'aria-pressed': false,\n        'role': 'button'\n      }).append(virtuoso.params.mainMenu),\n      submenu: $('<button />', {\n        'class': subMenuButtonClass,\n        'aria-expanded': false,\n        'aria-pressed': false,\n        'role': 'button'\n      }).append($('<span />', {\n        'class': 'screen-reader-text',\n        text: virtuoso.params.subMenu\n      }))\n    };\n\n    if ($('.nav-primary').length > 0) {\n      $('.nav-primary').before(toggleButtons.menu); // add the main nav buttons\n    } else {\n      $('.nav-header').before(toggleButtons.menu);\n    }\n    $('nav .sub-menu').before(toggleButtons.submenu); // add the submenu nav buttons\n    $('.' + mainMenuButtonClass).each(_addClassID);\n    $('.' + subMenuButtonClass).addClass('dashicons-before dashicons-arrow-down');\n    $(window).on('resize.virtuoso', _doResize).triggerHandler('resize.virtuoso');\n    $('.' + mainMenuButtonClass).on('click.virtuoso-mainbutton', _mainmenuToggle);\n    $('.' + subMenuButtonClass).on('click.virtuoso-subbutton', _submenuToggle);\n  };\n\n  function _combineMenus() {\n\n    console.log('yo');\n    if (window.innerWidth <= 769) {\n\n      $('ul.menu-secondary > li').addClass('moved-item'); // tag moved items so we can move them back\n      $('ul.menu-secondary > li').appendTo('ul.menu-primary');\n      $('.nav-secondary').hide();\n    }\n\n    if (window.innerWidth > 768) {\n      $('.nav-primary .genesis-nav-menu, nav .sub-menu').removeAttr('style');\n      $('.nav-secondary').show();\n      $('ul.menu-primary > li.moved-item').appendTo('ul.menu-secondary');\n    }\n  }\n\n  // add nav class and ID to related button\n  function _addClassID() {\n    var $this = $(this),\n        nav = $this.next('nav'),\n        id = 'class';\n    if ($(nav).attr('id')) {\n      id = 'id';\n    }\n    $this.attr('id', 'mobile-' + $(nav).attr(id));\n  }\n\n  // Change Skiplinks and Superfish\n  function _doResize() {\n    var buttons = $('button[id^=\"mobile-\"]').attr('id');\n    if (typeof buttons === 'undefined') {\n      return;\n    }\n    _superfishToggle(buttons);\n    _changeSkipLink(buttons);\n    _maybeClose(buttons);\n  }\n\n  /**\r\n   * action to happen when the main menu button is clicked\r\n   */\n  function _mainmenuToggle() {\n    var $this = $(this);\n    _toggleAria($this, 'aria-pressed');\n    _toggleAria($this, 'aria-expanded');\n    $this.toggleClass('activated');\n    $this.next('nav, .sub-menu').slideToggle('fast');\n  }\n\n  /**\r\n   * action for submenu toggles\r\n   */\n  function _submenuToggle() {\n\n    var $this = $(this),\n        others = $this.closest('.menu-item').siblings();\n    _toggleAria($this, 'aria-pressed');\n    _toggleAria($this, 'aria-expanded');\n    $this.toggleClass('activated');\n    $this.next('.sub-menu').slideToggle('fast');\n\n    others.find('.' + subMenuButtonClass).removeClass('activated').attr('aria-pressed', 'false');\n    others.find('.sub-menu').slideUp('fast');\n  }\n\n  /**\r\n   * activate/deactivate superfish\r\n   */\n  function _superfishToggle(buttons) {\n    if (typeof $('.js-superfish').superfish !== 'function') {\n      return;\n    }\n    if ('none' === _getDisplayValue(buttons)) {\n      $('.js-superfish').superfish({\n        'delay': 100,\n        'animation': { 'opacity': 'show', 'height': 'show' },\n        'dropShadows': false\n      });\n    } else {\n      $('.js-superfish').superfish('destroy');\n    }\n  }\n\n  /**\r\n   * modify skip links to match mobile buttons\r\n   */\n  function _changeSkipLink(buttons) {\n    var startLink = 'genesis-nav',\n        endLink = 'mobile-genesis-nav';\n    if ('none' === _getDisplayValue(buttons)) {\n      startLink = 'mobile-genesis-nav';\n      endLink = 'genesis-nav';\n    }\n    $('.genesis-skip-link a[href^=\"#' + startLink + '\"]').each(function () {\n      var link = $(this).attr('href');\n      link = link.replace(startLink, endLink);\n      $(this).attr('href', link);\n    });\n  }\n\n  function _maybeClose(buttons) {\n    if ('none' !== _getDisplayValue(buttons)) {\n      return;\n    }\n    $('.menu-toggle, .sub-menu-toggle').removeClass('activated').attr('aria-expanded', false).attr('aria-pressed', false);\n    $('nav, .sub-menu').attr('style', '');\n  }\n\n  /**\r\n   * generic function to get the display value of an element\r\n   * @param  {id} $id ID to check\r\n   * @return {string}     CSS value of display property\r\n   */\n  function _getDisplayValue($id) {\n    var element = document.getElementById($id),\n        style = window.getComputedStyle(element);\n    return style.getPropertyValue('display');\n  }\n\n  /**\r\n   * Toggle aria attributes\r\n   * @param  {button} $this     passed through\r\n   * @param  {aria-xx} attribute aria attribute to toggle\r\n   * @return {bool}           from _ariaReturn\r\n   */\n  function _toggleAria($this, attribute) {\n    $this.attr(attribute, function (index, value) {\n      return 'false' === value;\n    });\n  }\n\n  $(document).ready(function () {\n\n    // run test on initial page load\n    _combineMenus();\n\n    // run test on resize of the window\n    $(window).resize(function () {\n      _combineMenus();\n    });\n\n    virtuoso.params = typeof virtuosoLocalizedArgs === 'undefined' ? '' : virtuosoLocalizedArgs;\n\n    if (typeof virtuoso.params !== 'undefined') {\n      virtuoso.init();\n    }\n\n    $('.menu-toggle').click(function (e) {\n\n      if ($('.menu-toggle').hasClass('activated')) {\n\n        //Prevent Scrolling\n        $('html, body').css({\n          margin: 0,\n          height: '100%',\n          overflow: 'hidden'\n        });\n      } else {\n\n        $('html, body').css({\n          margin: 0,\n          height: 'unset',\n          overflow: 'unset'\n        });\n      }\n    });\n  });\n})(document, jQuery);"]}