{"version":3,"sources":["responsive-menu.min.js"],"names":["document","$","undefined","addClass","virtuoso","mainMenuButtonClass","subMenuButtonClass","_setupMenus","window","innerWidth","appendTo","hide","removeClass","removeAttr","show","_addClassID","$this","this","nav","next","id","attr","_doResize","buttons","superfish","_getDisplayValue","delay","animation","opacity","height","dropShadows","_superfishToggle","startLink","endLink","each","link","replace","_changeSkipLink","_maybeClose","_mainmenuToggle","_toggleAria","toggleClass","slideToggle","_submenuToggle","others","closest","siblings","find","slideUp","$id","element","getElementById","getComputedStyle","getPropertyValue","attribute","index","value","init","toggleButtons","menu","class","aria-expanded","aria-pressed","role","append","params","mainMenu","submenu","text","subMenu","length","before","on","triggerHandler","unbind","click","e","preventDefault","hasClass","css","margin","overflow","fadeIn","event","target","parent","ready","resize","virtuosoMenu","jQuery"],"mappings":"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","file":"responsive-menu.min.js","sourcesContent":["'use strict';\n\n(function (document, $, undefined) {\n\n  $('body').addClass('js');\n\n  'use strict';\n\n  var virtuoso = {},\n      mainMenuButtonClass = 'menu-toggle',\n      subMenuButtonClass = 'sub-menu-toggle';\n\n  virtuoso.init = function () {\n    var toggleButtons = {\n      menu: $('<button />', {\n        'class': mainMenuButtonClass,\n        'aria-expanded': false,\n        'aria-pressed': false,\n        'role': 'button'\n      }).append(virtuoso.params.mainMenu),\n      submenu: $('<button />', {\n        'class': subMenuButtonClass,\n        'aria-expanded': false,\n        'aria-pressed': false,\n        'role': 'button'\n      }).append($('<span />', {\n        'class': 'screen-reader-text',\n        text: virtuoso.params.subMenu\n      }))\n    };\n\n    if ($('.nav-primary').length > 0) {\n      $('.nav-primary').before(toggleButtons.menu); // add the main nav buttons\n    } else {\n      $('.nav-header').before(toggleButtons.menu);\n    }\n    $('nav .sub-menu').before(toggleButtons.submenu); // add the submenu nav buttons\n    $('.' + mainMenuButtonClass).each(_addClassID);\n    $('.' + mainMenuButtonClass).addClass('dashicons-before dashicons-menu');\n    $('.' + subMenuButtonClass).addClass('dashicons-before dashicons-arrow-down');\n    $(window).on('resize.virtuoso', _doResize).triggerHandler('resize.virtuoso');\n    $('.' + mainMenuButtonClass).on('click.virtuoso-mainbutton', _mainmenuToggle);\n    $('.' + subMenuButtonClass).on('click.virtuoso-subbutton', _submenuToggle);\n  };\n\n  $('.nav-primary .genesis-nav-menu').addClass('responsive-menu').before('<div class=\"responsive-menu-icon\"><span class=\"ti-menu\"></span></div>');\n\n  $('.responsive-menu-icon').unbind().click(function (e) {\n\n    e.preventDefault();\n\n    $('.nav-primary').toggleClass('mobile-navigation-open');\n    $('.responsive-menu-icon span').toggleClass('ti-menu ti-close');\n\n    if ($('.nav-primary').hasClass('mobile-navigation-open')) {\n\n      // Prevent Scrolling\n      $('html, body').css({\n        margin: 0,\n        height: '100%',\n        overflow: 'hidden'\n      });\n\n      $(this).next('.nav-primary .genesis-nav-menu').fadeIn('slow');\n    } else {\n\n      $('html, body').css({\n        margin: 0,\n        height: 'unset',\n        overflow: 'unset'\n      });\n\n      $(this).next('.nav-primary .genesis-nav-menu').hide();\n    }\n  });\n\n  $('.responsive-menu').on('click', '.menu-item', function (event) {\n    if (event.target !== this) return;\n    $(this).find('.sub-menu:first').slideToggle(function () {\n      $(this).parent().toggleClass('menu-open');\n    });\n  });\n\n  function _setupMenus() {\n    if (window.innerWidth <= 769) {\n      $('.nav-primary').addClass('mobile-navigation');\n      $('ul.menu-secondary > li').addClass('moved-item'); // tag moved items so we can move them back\n      $('ul.menu-secondary > li').appendTo('ul.menu-primary');\n      $('.nav-secondary').hide();\n    }\n\n    if (window.innerWidth > 768) {\n      $('.nav-primary').removeClass('mobile-navigation mobile-navigation-open');\n      $('.responsive-menu-icon span').removeClass('ti-close').addClass('ti-menu');\n      $('.nav-primary .genesis-nav-menu, nav .sub-menu').removeAttr('style');\n      $('.responsive-menu > .menu-item').removeClass('menu-open');\n      $('.nav-secondary').show();\n      $('ul.menu-primary > li.moved-item').appendTo('ul.menu-secondary');\n    }\n  }\n\n  // add nav class and ID to related button\n  function _addClassID() {\n    var $this = $(this),\n        nav = $this.next('nav'),\n        id = 'class';\n    if ($(nav).attr('id')) {\n      id = 'id';\n    }\n    $this.attr('id', 'mobile-' + $(nav).attr(id));\n  }\n\n  // Change Skiplinks and Superfish\n  function _doResize() {\n    var buttons = $('button[id^=\"mobile-\"]').attr('id');\n    if (typeof buttons === 'undefined') {\n      return;\n    }\n    _superfishToggle(buttons);\n    _changeSkipLink(buttons);\n    _maybeClose(buttons);\n  }\n\n  /**\r\n   * action to happen when the main menu button is clicked\r\n   */\n  function _mainmenuToggle() {\n    var $this = $(this);\n    _toggleAria($this, 'aria-pressed');\n    _toggleAria($this, 'aria-expanded');\n    $this.toggleClass('activated');\n    $this.next('nav, .sub-menu').slideToggle('fast');\n  }\n\n  /**\r\n   * action for submenu toggles\r\n   */\n  function _submenuToggle() {\n\n    var $this = $(this),\n        others = $this.closest('.menu-item').siblings();\n    _toggleAria($this, 'aria-pressed');\n    _toggleAria($this, 'aria-expanded');\n    $this.toggleClass('activated');\n    $this.next('.sub-menu').slideToggle('fast');\n\n    others.find('.' + subMenuButtonClass).removeClass('activated').attr('aria-pressed', 'false');\n    others.find('.sub-menu').slideUp('fast');\n  }\n\n  /**\r\n   * activate/deactivate superfish\r\n   */\n  function _superfishToggle(buttons) {\n    if (typeof $('.js-superfish').superfish !== 'function') {\n      return;\n    }\n    if ('none' === _getDisplayValue(buttons)) {\n      $('.js-superfish').superfish({\n        'delay': 100,\n        'animation': { 'opacity': 'show', 'height': 'show' },\n        'dropShadows': false\n      });\n    } else {\n      $('.js-superfish').superfish('destroy');\n    }\n  }\n\n  /**\r\n   * modify skip links to match mobile buttons\r\n   */\n  function _changeSkipLink(buttons) {\n    var startLink = 'genesis-nav',\n        endLink = 'mobile-genesis-nav';\n    if ('none' === _getDisplayValue(buttons)) {\n      startLink = 'mobile-genesis-nav';\n      endLink = 'genesis-nav';\n    }\n    $('.genesis-skip-link a[href^=\"#' + startLink + '\"]').each(function () {\n      var link = $(this).attr('href');\n      link = link.replace(startLink, endLink);\n      $(this).attr('href', link);\n    });\n  }\n\n  function _maybeClose(buttons) {\n    if ('none' !== _getDisplayValue(buttons)) {\n      return;\n    }\n    $('.menu-toggle, .sub-menu-toggle').removeClass('activated').attr('aria-expanded', false).attr('aria-pressed', false);\n    $('nav, .sub-menu').attr('style', '');\n  }\n\n  /**\r\n   * generic function to get the display value of an element\r\n   * @param  {id} $id ID to check\r\n   * @return {string}     CSS value of display property\r\n   */\n  function _getDisplayValue($id) {\n    var element = document.getElementById($id),\n        style = window.getComputedStyle(element);\n    return style.getPropertyValue('display');\n  }\n\n  /**\r\n   * Toggle aria attributes\r\n   * @param  {button} $this     passed through\r\n   * @param  {aria-xx} attribute aria attribute to toggle\r\n   * @return {bool}           from _ariaReturn\r\n   */\n  function _toggleAria($this, attribute) {\n    $this.attr(attribute, function (index, value) {\n      return 'false' === value;\n    });\n  }\n\n  $(document).ready(function () {\n\n    // run test on initial page load\n    _setupMenus();\n\n    // run test on resize of the window\n    $(window).resize(_setupMenus());\n\n    virtuoso.params = typeof virtuosoMenu === 'undefined' ? '' : virtuosoMenu;\n\n    if (typeof virtuoso.params !== 'undefined') {\n      virtuoso.init();\n    }\n  });\n})(document, jQuery);"]}